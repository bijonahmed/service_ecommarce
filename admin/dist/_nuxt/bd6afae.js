(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{633:function(e,t,n){"use strict";n.r(t);n(50),n(38),n(14),n(37);var r={head:{title:"Leave Allocation Edit"},data:function(){return{insertdata:{id:"",employee_type:"",employe_id:"",maximum_no_annual:"",leave_type:"",leave_in_hand:"",effective_year:"",year:"",status:1},empType:[],leaveType:[],emp_data:[],notifmsg:"",errors:{}}},created:function(){this.getData(),this.getEmployeeType(),this.getLeaveType()},methods:{getEmployeeType:function(){var e=this;this.$axios.get("/user/allemployeeType").then((function(t){e.empType=t.data.data}))},getLeaveType:function(){var e=this;this.$axios.get("/leave/getLeaveTypeList").then((function(t){e.leaveType=t.data.data}))},getEmployee:function(){var e=this,t=this.insertdata.employee_type;this.$axios.get("/user/getEmpType/".concat(t)).then((function(t){e.emp_data=t.data.data}))},getEmployeeSelect:function(e){var t=this;this.$axios.get("/user/getEmpType/".concat(e)).then((function(e){t.emp_data=e.data.data}))},getLeaveRulesInfo:function(){var e=this,t={employee_type:$(".employee_type").val(),emp_id:$(".employe_id").val()};this.$axios.get("/leave/getLeaveRulesCheck",{params:t}).then((function(t){console.log(t.data.data.maximum_no_annual),e.insertdata.maximum_no_annual=t.data.data.maximum_no_annual,e.insertdata.leave_type=t.data.data.leave_type,e.insertdata.leave_in_hand=t.data.data.leave_in_hand}))},saveData:function(){var e=this,t=new FormData;t.append("id",this.insertdata.id),t.append("maximum_no_annual",this.insertdata.maximum_no_annual),t.append("leave_type",this.insertdata.leave_type),t.append("employee_type",this.insertdata.employee_type),t.append("leave_in_hand",this.insertdata.leave_in_hand),t.append("effective_year",this.insertdata.effective_year),t.append("employe_id",this.insertdata.employe_id),t.append("year",this.insertdata.year),t.append("status",this.insertdata.status);this.$axios.post("/leave/createEditLeaveAllocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){$("#formrest")[0].reset(),e.success_noti(),e.$router.push("/leave/allocation-list")})).catch((function(t){422===t.response.status&&(e.errors=t.response.data.errors)}))},getData:function(){var e=this;console.log(this.$route.params.id);var t=this.$route.params.id;this.$axios.get("/leave/leaveAllocationRow/".concat(t)).then((function(t){e.insertdata.id=t.data.data.id,e.insertdata.maximum_no_annual=t.data.data.maximum_no_annual,e.insertdata.leave_type=t.data.data.leave_type,e.insertdata.employee_type=t.data.data.employee_type,e.insertdata.leave_in_hand=t.data.data.leave_in_hand,e.insertdata.effective_year=t.data.data.effective_year,e.insertdata.employe_id=t.data.data.employe_id,e.insertdata.year=t.data.data.year,e.insertdata.status=t.data.data.status,e.getEmployeeSelect(t.data.data.employee_type)}))},success_noti:function(){Lobibox.notify("success",{pauseDelayOnHover:!0,continueDelayOnInactiveTab:!1,position:"top right",icon:"bx bx-check-circle",msg:"Your data has been successfully inserted."})}}},o=n(26),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"page-wrapper"},[t("div",{staticClass:"page-content"},[t("div",{staticClass:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},[t("div",{staticClass:"ps-3"},[t("nav",{attrs:{"aria-label":"breadcrumb"}},[t("ol",{staticClass:"breadcrumb mb-0 p-0"},[t("li",{staticClass:"breadcrumb-item"},[t("router-link",{attrs:{to:"/hrm/dashboard",href:"javascript:;"}},[t("i",{staticClass:"bx bx-home-alt"})])],1),e._v(" "),t("li",{staticClass:"breadcrumb-item",attrs:{"aria-current":"page"}},[t("router-link",{attrs:{to:"/leave/allocation-list"}},[e._v("Leave Allocation List ")])],1),e._v(" "),t("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v("Leave Allocation")])])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xl-12 mx-auto"},[t("div",{staticClass:"card border-top border-0 border-4 border-info"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"border p-4 rounded"},[t("form",{staticClass:"forms-sample",attrs:{id:"formrest",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.saveData()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.id,expression:"insertdata.id"}],staticClass:"form-control id",attrs:{type:"hidden"},domProps:{value:e.insertdata.id},on:{input:function(t){t.target.composing||e.$set(e.insertdata,"id",t.target.value)}}}),e._v(" "),t("div",{staticClass:"row mb-3"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEnterYourName"}},[e._v("Employee Type")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.employee_type,expression:"insertdata.employee_type"}],staticClass:"form-select employee_type",attrs:{name:"employee_type"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.insertdata,"employee_type",t.target.multiple?n:n[0])},e.getEmployee]}},[t("option",{attrs:{value:""}},[e._v("Select")]),e._v(" "),e._l(e.empType,(function(data){return t("option",{domProps:{value:data.name}},[e._v(e._s(data.name)+"\r\n                                                ")])}))],2),e._v(" "),e.errors.employee_type?t("span",{staticClass:"text-danger"},[e._v(e._s(e.errors.employee_type[0]))]):e._e()])]),e._v(" "),t("div",{staticClass:"row mb-3"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEnterYourName"}},[e._v("Employee")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.employe_id,expression:"insertdata.employe_id"}],staticClass:"form-select employe_id",attrs:{name:"employe_id"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.insertdata,"employe_id",t.target.multiple?n:n[0])},e.getLeaveRulesInfo]}},[t("option",{attrs:{value:""}},[e._v("All")]),e._v(" "),e._l(e.emp_data,(function(data){return t("option",{domProps:{value:data.employe_id}},[e._v(e._s(data.name)+" ["+e._s(data.employee_code)+"]\r\n                                                ")])}))],2),e._v(" "),e.errors.employe_id?t("span",{staticClass:"text-danger"},[e._v(e._s(e.errors.employe_id[0]))]):e._e()])]),e._v(" "),t("div",{staticClass:"row mb-3"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEnterYourName"}},[e._v("Leave Type")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.leave_type,expression:"insertdata.leave_type"}],staticClass:"form-control leave_type",attrs:{type:"text",disabled:""},domProps:{value:e.insertdata.leave_type},on:{input:function(t){t.target.composing||e.$set(e.insertdata,"leave_type",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row mb-3"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEnterYourName"}},[e._v("Max No.")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.maximum_no_annual,expression:"insertdata.maximum_no_annual"}],staticClass:"form-control maximum_no_annual",attrs:{type:"text",disabled:""},domProps:{value:e.insertdata.maximum_no_annual},on:{input:function(t){t.target.composing||e.$set(e.insertdata,"maximum_no_annual",t.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.maximum_no_annual,expression:"insertdata.maximum_no_annual"}],attrs:{type:"hidden"},domProps:{value:e.insertdata.maximum_no_annual},on:{input:function(t){t.target.composing||e.$set(e.insertdata,"maximum_no_annual",t.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.leave_type,expression:"insertdata.leave_type"}],attrs:{type:"hidden"},domProps:{value:e.insertdata.leave_type},on:{input:function(t){t.target.composing||e.$set(e.insertdata,"leave_type",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row mb-3"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEnterYourName"}},[e._v("Choose Year")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.year,expression:"insertdata.year"}],staticClass:"form-select year",attrs:{name:"year"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.insertdata,"year",t.target.multiple?n:n[0])}}},[t("option",{attrs:{value:""}},[e._v("Select")]),e._v(" "),t("option",{attrs:{value:"2021"}},[e._v("2021")]),e._v(" "),t("option",{attrs:{value:"2022"}},[e._v("2022")]),e._v(" "),t("option",{attrs:{value:"2023"}},[e._v("2023")]),e._v(" "),t("option",{attrs:{value:"2024"}},[e._v("2024")]),e._v(" "),t("option",{attrs:{value:"2025"}},[e._v("2025")]),e._v(" "),t("option",{attrs:{value:"2026"}},[e._v("2026")]),e._v(" "),t("option",{attrs:{value:"2027"}},[e._v("2027")]),e._v(" "),t("option",{attrs:{value:"2028"}},[e._v("2028")])]),e._v(" "),e.errors.year?t("span",{staticClass:"text-danger"},[e._v(e._s(e.errors.year[0]))]):e._e()])]),e._v(" "),t("div",{staticClass:"row mb-3"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEnterYourName"}},[e._v("Leave in Hand ")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.leave_in_hand,expression:"insertdata.leave_in_hand"}],staticClass:"form-control leave_in_hand",attrs:{type:"text"},domProps:{value:e.insertdata.leave_in_hand},on:{input:function(t){t.target.composing||e.$set(e.insertdata,"leave_in_hand",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row mb-3"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputEnterYourName"}},[e._v("Effective Year ")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.effective_year,expression:"insertdata.effective_year"}],staticClass:"form-control leave_type",attrs:{type:"text"},domProps:{value:e.insertdata.effective_year},on:{input:function(t){t.target.composing||e.$set(e.insertdata,"effective_year",t.target.value)}}}),e._v(" "),e.errors.effective_year?t("span",{staticClass:"text-danger"},[e._v(e._s(e.errors.effective_year[0]))]):e._e()])]),e._v(" "),t("div",{staticClass:"row mb-3 d-none"},[t("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"inputConfirmPassword2"}},[e._v("Status")]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.insertdata.status,expression:"insertdata.status"}],staticClass:"form-select",attrs:{name:"status"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.insertdata,"status",t.target.multiple?n:n[0])}}},[t("option",{attrs:{value:"1",selected:""}},[e._v("Active")]),e._v(" "),t("option",{attrs:{value:"0"}},[e._v("Inactive")])]),e._v(" "),e.errors.status?t("span",{staticClass:"text-danger"},[e._v(e._s(e.errors.status[0]))]):e._e()])]),e._v(" "),e._m(0)])])])])])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("label",{staticClass:"col-sm-3 col-form-label"}),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("button",{staticClass:"btn btn-success px-5 w-100",attrs:{type:"submit"}},[t("i",{staticClass:"bx bx-check-circle mr-1"}),e._v(" Submit")])])])}],!1,null,null,null);t.default=component.exports}}]);